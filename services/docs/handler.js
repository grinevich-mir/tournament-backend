'use strict';
require('source-map-support').install();
const express = require('express');
const path = require('path');
const serverless = require('serverless-http');
const swue = require('swagger-ui-express');

var x = express();

const basePath = process.env.IS_OFFLINE ? '/' : '/docs/';
const subdomain = process.env.SUBDOMAIN;
const title = process.env.API === 'client' ? 'Client' : 'Management';
const baseUrl = process.env.IS_OFFLINE ? 'http://localhost:3000' : `https://${subdomain}.${process.env.DOMAIN}/docs`;

function getSpecs() {
    const ctx = require.context('./specs', false, /\.json$/)
    return ctx.keys().map(k => {
        const parsed = path.parse(k);
        const item = ctx(k);
        return {
            name: `${item.info.title} (${process.env.STAGE.toUpperCase()})`,
            url: `${baseUrl}/spec/${parsed.name}`
        }
    });
}

const specs = getSpecs();

const options = {
    customSiteTitle: `Tournament ${title} API Docs (${process.env.STAGE.toUpperCase()})`,
    customCss: `.topbar-wrapper img {
        content:url('data:image/png;base64,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');
    }

    .topbar-wrapper > a:after {
        content: '${title}'
    }
    
    .info__license {
        display: none;
    }
    `,
    swaggerUrls: specs,
    swaggerOptions: {
        validatorUrl: null,
        oauth2RedirectUrl: `${baseUrl}/oauth2-redirect.html`,
        oauth: {
            clientId: process.env.API === 'client' ? process.env.CLIENT_ID : process.env.ADMIN_CLIENT_ID
        }
    }
};

x.get(`${basePath}spec/:service`, (req, res) => {
    const service = req.params['service'];
    var swagger = require(`./specs/${service}.json`);
    res.json(swagger);
});

x.use(`${basePath}`, swue.serve, swue.setup(undefined, options));

const app = serverless(x);
module.exports.app = app;

